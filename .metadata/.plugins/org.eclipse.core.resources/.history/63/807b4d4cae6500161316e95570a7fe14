package com.revature.dataAccess;

import java.util.Date;
import java.util.HashSet;
import java.util.Set;

import org.hibernate.Query;

import com.revature.beans.Address;
import com.revature.beans.CategoryDescription;
import com.revature.beans.Client;
import com.revature.beans.ClientType;
import com.revature.beans.Invoice;
import com.revature.beans.Order;
import com.revature.beans.Product;
import com.revature.beans.State;

public class BusinessLayer {
	
	private DataLayerAccess dla;
	
	/////////////////////////// BEGIN ADD CLIENT //////////////////////////
	
	//Needs to have a State Name passed in to get State.
	//Use returned state object for making the Address
	public State getState(String stateName){
		State state = dla.getState(stateName);
		return state;
	}
	
	//Pass an Address object to add the Address
	public void addAddress(Address address){
		dla.createObject(address);
	}
	
	//Get the clientTypeId object chosen from the Drop-down list
	public ClientType getClientType(int clientTypeId){
		ClientType clientType = dla.getClientType(clientTypeId);
		
		return clientType;
	}
	
	//Now add the Client! WOO!
	//Probably should change to boolean for a check
	public void addClient(Client client){
		dla.createObject(client);
	}

	////////////////////////// END ADD CLIENT ///////////////////////////
	
	
	///////////////////////// BEGIN UPDATE AND 'DELETE' CLIENT ////////////////////////////////
	
	//retrieve list of clients
	//Use to refresh the clients on the web side
	public Set<Client> getClients(){
		Set<Client> clients = dla.allClients();
		
		return clients;
	}
	
	//pass the changed client back
	public void updateClient(Client client){
		dla.createObject(client);
	}
	
	//pass to 'delete' client
	public void deleteClient(Client client){
		dla.terminateClient(client);
	}
	
	///////////////////////// END UPDATE AND 'DELETE' CLIENT //////////////////////////////////
	
	
	///////////////////////// BEGIN ADD PRODUCTS //////////////////////////////////////////////

	//get the Category Description based on the Drop Down list
	public Set<CategoryDescription> getCatDesc(String categoryChoice){
		Set<CategoryDescription> catDesc = dla.getCatChoice(categoryChoice);
		
		return catDesc;
	}
	
	//use a form to create a new product, pass the created object back
	//can change this to send back a boolean for verification of adding the item
	public void addProduct(Product product){
		dla.createObject(product);
	}
	
	//////////////////////// END ADD PRODUCTS ////////////////////////////////////////////////
	
	
	/////////////////////// BEGIN UPDATE AND 'DELETE' PRODUCTS //////////////////////////////////////
	
	//get all products
	public Set<Product> getAllProducts(){
		Set<Product> products = dla.getProducts();
		
		return products;
	}
	
	//update product
	public void updateProduct(Product product){
		dla.createObject(product);
	}
	
	//'delete' product
	public void deleteProduct(Product product){
		dla.deleteProduct(product);
	}
	
	////////////////////// END UPDATE AND 'DELETE' PRODUCTS /////////////////////////////////////////
	
	
	////////////////////// BEGIN GENERATING REPORTS ////////////////////////////////////////////////
	
	///grab all reports (for now), and work on them on the front end. 
	public Set<Invoice> getInvoices(){
		Set<Invoice> invoices = dla.getAllInvoices();
		
		return invoices;
		
	}
	
	////////////////////// END GENERATING REPORTS /////////////////////////////////////////////////
	
	
	/////////////////// BEGIN CREATING INCOMING AND OUTGOING INVOICES ///////////////////////////////
	

	// pass clientType for the drop-down list
	
	public Set<ClientType> getClientTypes(){
		Set<ClientType> clientTypes = dla.clientTypeList();
		
		return clientTypes;
	}
	
	// get the clientType object
	// called in a previous method above
	//get Client list for drop down based on the user's choice
	
	public Set<Client> getClientList(ClientType clientType){
		
	}
	
//	Set<Client> clients = dla.clientList(choiceType.getId());
//	
//	//choose Client
//	int id = 100;
//	
//	Client client = new Client();
//	for(Client cl : clients){
//		if(cl.getId() == id){
//			client = cl;
//		}
//	}
//	
//	int prodId = 50;
//	Product prod = new Product();
//	//choice attachment for buying items, pass up products 
//	// mock set up for "user" choice
//	Set<Product> products = dla.getProducts();
//	
//	for(Product p : products){
//		if(p.getId() == prodId){
//			prod = p;
//		}
//	}
//	
//	int quantity = -100;
//	
//	//change quantity of product
//	prod.setQuantity(prod.getQuantity() + quantity);
//	dla.createObject(prod);
//
//	
//	//create invoice
//	//set date upside of the object to retrieve the 
//	// correct order number, so that the invoice can be properly made
//	// just need to subtract or add stock value of product; depending on the return
//	Date orderDate = new Date();
//	
//	Order orderObj = new Order(1, 125.54, orderDate, 15.24, (125.54+15.24), client);
//	dla.createObject(orderObj);
//	
//	//re-grab orderObj as the new orderId has changed
//	orderObj = dla.getNewOrder(orderDate);
//	
//	//make Invoice PK
//	InvoicePK invoicePk = new InvoicePK(orderObj, 1);
//	dla.createObject(invoicePk);
//
//	//make invoice
//	Invoice invoice = new Invoice(invoicePk,(125.54+15.24), 150, prod);
//	dla.createObject(invoice);
	
	
	////////////////////// END CREATING INCOMING AND OUTGOING INVOICES //////////////////////////////
}
